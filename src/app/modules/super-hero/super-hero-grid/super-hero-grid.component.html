<table
  mat-table
  class="mat-elevation-z8"
  [dataSource]="dataSource"
  matSort
  matSortDirection="asc"
  aria-label="Elements"
>
  <!-- Dynamic Column -->
  <ng-container
    *ngFor="let column of columnsDef?.columns"
    [matColumnDef]="column.headerDef"
  >
    <th mat-header-cell *matHeaderCellDef scope="col" mat-sort-header>
      {{ column.cellDef | translate }}
    </th>
    <ng-container [ngSwitch]="column.headerDef">
      <ng-container *ngSwitchCase="'genre'">
        <td mat-cell *matCellDef="let element">
          {{
            genres[element[column.headerDef]]
              | dropdownTranslate: 'globals.enums.genres'
          }}
        </td>
      </ng-container>
      <ng-container *ngSwitchCase="'picture'">
        <td mat-cell *matCellDef="let element">
          <img
            class="picture"
            [src]="element[column.headerDef] || noImageSrc"
            alt="picture"
          />
        </td>
      </ng-container>
      <ng-container *ngSwitchDefault>
        <td mat-cell *matCellDef="let element">
          {{ element[column.headerDef] || '-' }}
        </td>
      </ng-container>
    </ng-container>
  </ng-container>

  <!-- Action Column -->
  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef scope="colgroup">
      <button
        mat-icon-button
        aria-label="Icon button with a add icon"
        (click)="onAddOrEditOrView()"
      >
        <mat-icon color="primary" aria-hidden="false">add</mat-icon>
      </button>
    </th>
    <td mat-cell *matCellDef="let element">
      <button
        mat-icon-button
        aria-label="Icon button with a visibility icon"
        (click)="onAddOrEditOrView(element, true)"
      >
        <mat-icon aria-hidden="false">visibility</mat-icon>
      </button>
      <button
        color="primary"
        mat-icon-button
        aria-label="Icon button with a edit icon"
        (click)="onAddOrEditOrView(element)"
      >
        <mat-icon aria-hidden="false">edit</mat-icon>
      </button>
      <button
        color="warn"
        mat-icon-button
        aria-label="Icon button with a delete icon"
        (click)="onDelete(element)"
      >
        <mat-icon aria-hidden="false">delete</mat-icon>
      </button>
    </td>
  </ng-container>

  <ng-container matColumnDef="header-row-title">
    <th
      mat-header-cell
      *matHeaderCellDef
      [style.text-align]="center"
      [attr.colspan]="4"
    >
      <h2>{{ 'superHeroes.title' | translate }}</h2>
    </th>
  </ng-container>

  <ng-container matColumnDef="header-row-filter">
    <th class="filter" mat-header-cell *matHeaderCellDef [attr.colspan]="4">
      <mat-form-field appearance="outline">
        <mat-label>{{
          'superHeroes.grid.filterInput.label' | translate
        }}</mat-label>
        <input
          type="search"
          matInput
          [placeholder]="'superHeroes.grid.filterInput.placeholder' | translate"
          #input
        />
        <button
          mat-button
          *ngIf="input.value"
          matSuffix
          mat-icon-button
          aria-label="Clear"
          (click)="onReset()"
        >
          <mat-icon>close</mat-icon>
        </button>
      </mat-form-field>
    </th>
  </ng-container>

  <tr
    mat-header-row
    *matHeaderRowDef="['header-row-title', 'header-row-filter']"
  ></tr>
  <tr
    mat-header-row
    *matHeaderRowDef="columnsDef?.displayedColumns; sticky: true"
  ></tr>
  <tr mat-row *matRowDef="let row; columns: columnsDef?.displayedColumns"></tr>

  <!-- Row shown when there is no matching data. -->
  <tr class="mat-row" *matNoDataRow>
    <td class="mat-cell" colspan="4">
      {{
        'globals.grid.noMatchingDataText'
          | translate: { value: input?.value || '' }
      }}
    </td>
  </tr>
</table>

<mat-paginator
  #paginator
  [length]="dataSource.count$ | async"
  [pageIndex]="0"
  [pageSize]="5"
  [pageSizeOptions]="[5, 10, 15, 20]"
>
</mat-paginator>
